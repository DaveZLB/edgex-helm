apiVersion: v1
kind: Pod
metadata:
  labels:
    org.edgexfoundry.service: {{.Values.edgex.configSeed.name}}
  name: {{.Values.edgex.configSeed.name}}
spec:
  containers:
  - name: {{.Values.edgex.configSeed.name}}
    image: {{.Values.edgex.configSeed.image}}
    imagePullPolicy: Always
    env:
    - name: edgex_registry
      value: consul://edgex-core-consul:8500
    - name: Clients_CoreData_Host
      value: edgex-core-data
    - name: Clients_Logging_Host
      value: edgex-support-logging
    - name: EDGEX_SECURITY_SECRET_STORE
      value: "false"
    - name: Logging_EnableRemote
      value: "true"
    - name: Service.Host
      value: 0.0.0.0
    resources: {}
    volumeMounts:
    - mountPath: /edgex/logs
      name: log-data
  initContainers:
  - name: wait-for-consul
    image: busybox:1.28
    command: ['sh', '-c', 'until wget edgex-core-consul:8500; do echo waiting for consul; sleep 2; done;']
  hostname: {{.Values.edgex.configSeed.name}}
  restartPolicy: Never
  volumes:
  - name: log-data
    persistentVolumeClaim:
      claimName: log-data
status: {}
